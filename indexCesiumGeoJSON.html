<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cesium UTM to WGS84</title>

  <!--LIBRERIA TRASFORMACION GEOLOCALIZACION-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script>

  <!--CESIUM-->
  <script src="https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.129/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  
  <!--BOOTSTRAP-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  
  <script src="js/createElementsGEO.js"></script>
  <link rel="stylesheet" href="styles/styles.css"></script>
  <style>
   
  </style>
</head>
<body>
  <div id="cesiumContainer">
    <div class="floating-layer">
      <h3>InformaciÃ³n Adicional</h3>
      <p>Esta es una capa flotante sobre el mapa.</p>
      <div id="arbol">
        <ul class="tree">
          <li>
              <span onclick="toggleSubtree(this)">ðŸ“‚ Capas Base</span>
              <ul class="nested">
                  <li onclick="cargarGeoJSON('./datos/MOVI_Pto_AccesoRestr.json')">ðŸŒŽ Puntos de Acceso restringido</li>
                  <li onclick="cargarGeoJSON('./datos/MOVI_Pol_ZonaAccesoRestr.json')">ðŸŒŽ Zona Acceso restringido</li>
              </ul>
          </li>
        </ul>
        <br>
        <button class="btn btn-primary" onclick="limpiarEntidades()">Limpiar</button>
        <br>
        <br>
        <button class="btn btn-primary" onclick="puntoPamplona()">Pamplona</button>
      </div>
    </div>
  </div>

  <script type="module">

    import './js/createElementsGEO.js';
    // Inicializar Cesium
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3YWQ3ZWY4ZS03NzBjLTRjNzktYTYyNy0zMTRkYmE1NmE1NDciLCJpZCI6MjgwODk3LCJpYXQiOjE3NDEwNzIzMzl9.rpQ6pVt0APCbZ_zhTJkhquCVXwmMo3unuk4ZafCea-k'; // Usa tu token de Cesium o deja en blanco si es local

    // const viewer = new Cesium.Viewer("cesiumContainer", {
    //     terrain: Cesium.Terrain.fromWorldTerrain(),
    // });

      var viewer = new Cesium.Viewer("cesiumContainer", {
        timeline: false,
        animation: false,
        sceneModePicker: false,
        baseLayerPicker: false,
        geocoder: Cesium.IonGeocodeProviderType.GOOGLE,
        // The globe does not need to be displayed,
        // since the Photorealistic 3D Tiles include terrain
        globe: false,
      });

      window.viewer = viewer; // Make the viewer accessible globally

      // Enable rendering the sky
      viewer.scene.skyAtmosphere.show = true;



        // Add Google Photorealistic 3D Tiles
        try {
          const googleTileset = await Cesium.createGooglePhotorealistic3DTileset({
            // Only the Google Geocoder can be used with Google Photorealistic 3D Tiles.  Set the `geocode` property of the viewer constructor options to IonGeocodeProviderType.GOOGLE.
            onlyUsingWithGoogleGeocoder: true,
          });
          viewer.scene.primitives.add(googleTileset);
        } catch (error) {
          console.log(`Error loading Photorealistic 3D Tiles tileset.
          ${error}`);
        }

    </script>

</body>
</html>
